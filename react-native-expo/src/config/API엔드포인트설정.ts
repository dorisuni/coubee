import { authAPI, orderAPI, paymentAPI, qrAPI, ì¶”ê°€API } from '../api/client';

export interface ë§¤ê°œë³€ìˆ˜ì •ë³´ {
  ì´ë¦„: string;
  íƒ€ì…: string;
  í•„ìˆ˜ì—¬ë¶€: boolean;
  ê¸°ë³¸ê°’?: string;
  ì„¤ëª…?: string;
  ì˜ˆì‹œ?: string;
}

export interface APIì—”ë“œí¬ì¸íŠ¸ {
  ì´ë¦„: string;
  ì„¤ëª…: string;
  ì¹´í…Œê³ ë¦¬: string;
  í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤?: Record<string, string>) => Promise<any>;
  ë§¤ê°œë³€ìˆ˜ëª©ë¡?: ë§¤ê°œë³€ìˆ˜ì •ë³´[];
  HTTPë©”ì„œë“œ?: string;
  ì—”ë“œí¬ì¸íŠ¸URL?: string;
}

export const ì „ì²´APIëª©ë¡ = (ì‚¬ìš©ìì•„ì´ë””: number): APIì—”ë“œí¬ì¸íŠ¸[] => [
  // ğŸ” ì¸ì¦ ê´€ë ¨ API
  {
    ì´ë¦„: 'ë¡œê·¸ì•„ì›ƒ',
    ì„¤ëª…: 'í˜„ì¬ ì‚¬ìš©ìë¥¼ ë¡œê·¸ì•„ì›ƒí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ” ì¸ì¦',
    í•¨ìˆ˜: () => authAPI.logout(),
    HTTPë©”ì„œë“œ: 'POST',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/user/auth/logout'
  },

  // ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬ API
  {
    ì´ë¦„: 'ì‚¬ìš©ì ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ',
    ì„¤ëª…: 'í˜„ì¬ ì‚¬ìš©ìì˜ ì£¼ë¬¸ ëª©ë¡ì„ í˜ì´ì§€ë„¤ì´ì…˜ìœ¼ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => {
      const í˜ì´ì§€ = parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.í˜ì´ì§€ || '0');
      const í¬ê¸° = parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.í¬ê¸° || '10');
      return orderAPI.getUserOrders(ì‚¬ìš©ìì•„ì´ë””, í˜ì´ì§€, í¬ê¸°);
    },
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'í˜ì´ì§€',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: false,
        ê¸°ë³¸ê°’: '0',
        ì„¤ëª…: 'ì¡°íšŒí•  í˜ì´ì§€ ë²ˆí˜¸ (0ë¶€í„° ì‹œì‘)',
        ì˜ˆì‹œ: '0'
      },
      {
        ì´ë¦„: 'í¬ê¸°',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: false,
        ê¸°ë³¸ê°’: '10',
        ì„¤ëª…: 'í•œ í˜ì´ì§€ë‹¹ í‘œì‹œí•  ì£¼ë¬¸ ìˆ˜',
        ì˜ˆì‹œ: '10'
      }
    ],
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: `/api/order/users/${ì‚¬ìš©ìì•„ì´ë””}/orders`
  },

  {
    ì´ë¦„: 'ì „ì²´ ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ',
    ì„¤ëª…: 'ì‹œìŠ¤í…œì˜ ëª¨ë“  ì£¼ë¬¸ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤ (ê´€ë¦¬ììš©)',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => {
      const í˜ì´ì§€ = parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.í˜ì´ì§€ || '0');
      const í¬ê¸° = parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.í¬ê¸° || '10');
      return ì¶”ê°€API.ì „ì²´ì£¼ë¬¸ëª©ë¡ì¡°íšŒ(í˜ì´ì§€, í¬ê¸°);
    },
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'í˜ì´ì§€',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: false,
        ê¸°ë³¸ê°’: '0',
        ì„¤ëª…: 'ì¡°íšŒí•  í˜ì´ì§€ ë²ˆí˜¸',
        ì˜ˆì‹œ: '0'
      },
      {
        ì´ë¦„: 'í¬ê¸°',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: false,
        ê¸°ë³¸ê°’: '10',
        ì„¤ëª…: 'í•œ í˜ì´ì§€ë‹¹ í‘œì‹œí•  ì£¼ë¬¸ ìˆ˜',
        ì˜ˆì‹œ: '10'
      }
    ],
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/orders'
  },

  {
    ì´ë¦„: 'ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ',
    ì„¤ëª…: 'íŠ¹ì • ì£¼ë¬¸ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => orderAPI.getOrder(ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1'),
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ì¡°íšŒí•  ì£¼ë¬¸ì˜ ê³ ìœ  ì‹ë³„ì',
        ì˜ˆì‹œ: 'ORDER_123456789'
      }
    ],
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/orders/{ì£¼ë¬¸ID}'
  },

  {
    ì´ë¦„: 'ì£¼ë¬¸ ìˆ˜ë ¹ ë“±ë¡',
    ì„¤ëª…: 'ì£¼ë¬¸ì´ ìˆ˜ë ¹ë˜ì—ˆìŒì„ ì‹œìŠ¤í…œì— ë“±ë¡í•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => orderAPI.receiveOrder(ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1'),
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ìˆ˜ë ¹í•  ì£¼ë¬¸ì˜ ê³ ìœ  ì‹ë³„ì',
        ì˜ˆì‹œ: 'ORDER_123456789'
      }
    ],
    HTTPë©”ì„œë“œ: 'POST',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/orders/{ì£¼ë¬¸ID}/receive'
  },

  {
    ì´ë¦„: 'ì£¼ë¬¸ ìƒíƒœ ë³€ê²½',
    ì„¤ëª…: 'ì£¼ë¬¸ì˜ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => orderAPI.updateOrderStatus(
      ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1',
      ë§¤ê°œë³€ìˆ˜ë“¤?.ìƒíƒœ || 'COMPLETED'
    ),
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ìƒíƒœë¥¼ ë³€ê²½í•  ì£¼ë¬¸ì˜ ID',
        ì˜ˆì‹œ: 'ORDER_123456789'
      },
      {
        ì´ë¦„: 'ìƒíƒœ',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ë³€ê²½í•  ì£¼ë¬¸ ìƒíƒœ (PENDING, CONFIRMED, PREPARING, READY, COMPLETED, CANCELLED)',
        ì˜ˆì‹œ: 'COMPLETED'
      }
    ],
    HTTPë©”ì„œë“œ: 'PATCH',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/orders/{ì£¼ë¬¸ID}'
  },

  {
    ì´ë¦„: 'ì£¼ë¬¸ ì·¨ì†Œ',
    ì„¤ëª…: 'íŠ¹ì • ì£¼ë¬¸ì„ ì·¨ì†Œí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“¦ ì£¼ë¬¸ ê´€ë¦¬',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => ì¶”ê°€API.ì£¼ë¬¸ì·¨ì†Œ(ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1'),
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ì·¨ì†Œí•  ì£¼ë¬¸ì˜ ê³ ìœ  ì‹ë³„ì',
        ì˜ˆì‹œ: 'ORDER_123456789'
      }
    ],
    HTTPë©”ì„œë“œ: 'DELETE',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/orders/{ì£¼ë¬¸ID}'
  },

  // ğŸ’³ ê²°ì œ ê´€ë ¨ API
  {
    ì´ë¦„: 'ê²°ì œ ì„¤ì • ì¡°íšŒ',
    ì„¤ëª…: 'ì‹œìŠ¤í…œì˜ ê²°ì œ ì„¤ì • ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ’³ ê²°ì œ',
    í•¨ìˆ˜: () => paymentAPI.getPaymentConfig(),
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/payment/config'
  },

  {
    ì´ë¦„: 'ê²°ì œ ì¤€ë¹„',
    ì„¤ëª…: 'ì£¼ë¬¸ì— ëŒ€í•œ ê²°ì œë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ’³ ê²°ì œ',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => {
      const ì¤€ë¹„ë°ì´í„° = {
        storeId: parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.ë§¤ì¥ID || '1'),
        items: [{
          productId: parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.ìƒí’ˆID || '1'),
          name: ë§¤ê°œë³€ìˆ˜ë“¤?.ìƒí’ˆëª… || 'í…ŒìŠ¤íŠ¸ ìƒí’ˆ',
          quantity: parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.ìˆ˜ëŸ‰ || '1'),
          price: parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.ê°€ê²© || '1000')
        }]
      };
      return paymentAPI.preparePayment(ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1', ì¤€ë¹„ë°ì´í„°);
    },
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ê²°ì œí•  ì£¼ë¬¸ì˜ ID',
        ì˜ˆì‹œ: 'ORDER_123456789'
      },
      {
        ì´ë¦„: 'ë§¤ì¥ID',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ë§¤ì¥ ì‹ë³„ì',
        ì˜ˆì‹œ: '1'
      },
      {
        ì´ë¦„: 'ìƒí’ˆID',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ìƒí’ˆ ì‹ë³„ì',
        ì˜ˆì‹œ: '1'
      },
      {
        ì´ë¦„: 'ìƒí’ˆëª…',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ìƒí’ˆ ì´ë¦„',
        ì˜ˆì‹œ: 'ì•„ë©”ë¦¬ì¹´ë…¸'
      },
      {
        ì´ë¦„: 'ìˆ˜ëŸ‰',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ì£¼ë¬¸ ìˆ˜ëŸ‰',
        ì˜ˆì‹œ: '2'
      },
      {
        ì´ë¦„: 'ê°€ê²©',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ë‹¨ìœ„ ê°€ê²©',
        ì˜ˆì‹œ: '4500'
      }
    ],
    HTTPë©”ì„œë“œ: 'POST',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/payment/orders/{ì£¼ë¬¸ID}/prepare'
  },

  {
    ì´ë¦„: 'ê²°ì œ ìƒíƒœ ì¡°íšŒ',
    ì„¤ëª…: 'íŠ¹ì • ê²°ì œì˜ í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ’³ ê²°ì œ',
    í•¨ìˆ˜: (ë§¤ê°œë³€ìˆ˜ë“¤) => paymentAPI.getPaymentStatus(ë§¤ê°œë³€ìˆ˜ë“¤?.ê²°ì œID || '1'),
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ê²°ì œID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'ì¡°íšŒí•  ê²°ì œì˜ ê³ ìœ  ì‹ë³„ì',
        ì˜ˆì‹œ: 'PAYMENT_123456789'
      }
    ],
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/payment/{ê²°ì œID}/status'
  },

  // ğŸ“± QR ì½”ë“œ ê´€ë ¨ API
  {
    ì´ë¦„: 'QR ì½”ë“œ URL ì¡°íšŒ',
    ì„¤ëª…: 'ì£¼ë¬¸ ìˆ˜ë ¹ìš© QR ì½”ë“œ URLì„ ìƒì„±í•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“± QR ì½”ë“œ',
    í•¨ìˆ˜: async (ë§¤ê°œë³€ìˆ˜ë“¤) => {
      const í¬ê¸° = parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.í¬ê¸° || '200');
      const url = await qrAPI.getQrCodeUrl(ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1', í¬ê¸°);
      return { qrUrl: url, í¬ê¸° };
    },
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'QR ì½”ë“œë¥¼ ìƒì„±í•  ì£¼ë¬¸ì˜ ID',
        ì˜ˆì‹œ: 'ORDER_123456789'
      },
      {
        ì´ë¦„: 'í¬ê¸°',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: false,
        ê¸°ë³¸ê°’: '200',
        ì„¤ëª…: 'QR ì½”ë“œ ì´ë¯¸ì§€ í¬ê¸° (í”½ì…€)',
        ì˜ˆì‹œ: '300'
      }
    ],
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/qr/orders/{ì£¼ë¬¸ID}'
  },

  {
    ì´ë¦„: 'QR ì½”ë“œ Base64 ì´ë¯¸ì§€ ì¡°íšŒ',
    ì„¤ëª…: 'ì£¼ë¬¸ ìˆ˜ë ¹ìš© QR ì½”ë“œë¥¼ Base64 ì¸ì½”ë”©ëœ ì´ë¯¸ì§€ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤',
    ì¹´í…Œê³ ë¦¬: 'ğŸ“± QR ì½”ë“œ',
    í•¨ìˆ˜: async (ë§¤ê°œë³€ìˆ˜ë“¤) => {
      const í¬ê¸° = parseInt(ë§¤ê°œë³€ìˆ˜ë“¤?.í¬ê¸° || '200');
      const base64 = await qrAPI.getQrCodeBase64(ë§¤ê°œë³€ìˆ˜ë“¤?.ì£¼ë¬¸ID || '1', í¬ê¸°);
      return { qrBase64: base64, í¬ê¸° };
    },
    ë§¤ê°œë³€ìˆ˜ëª©ë¡: [
      {
        ì´ë¦„: 'ì£¼ë¬¸ID',
        íƒ€ì…: 'ë¬¸ìì—´',
        í•„ìˆ˜ì—¬ë¶€: true,
        ì„¤ëª…: 'QR ì½”ë“œë¥¼ ìƒì„±í•  ì£¼ë¬¸ì˜ ID',
        ì˜ˆì‹œ: 'ORDER_123456789'
      },
      {
        ì´ë¦„: 'í¬ê¸°',
        íƒ€ì…: 'ìˆ«ì',
        í•„ìˆ˜ì—¬ë¶€: false,
        ê¸°ë³¸ê°’: '200',
        ì„¤ëª…: 'QR ì½”ë“œ ì´ë¯¸ì§€ í¬ê¸° (í”½ì…€)',
        ì˜ˆì‹œ: '300'
      }
    ],
    HTTPë©”ì„œë“œ: 'GET',
    ì—”ë“œí¬ì¸íŠ¸URL: '/api/order/qr/orders/{ì£¼ë¬¸ID}'
  }
];

// ì¹´í…Œê³ ë¦¬ë³„ API ê·¸ë£¹í™” í•¨ìˆ˜
export const ì¹´í…Œê³ ë¦¬ë³„APIê·¸ë£¹í™” = (APIëª©ë¡: APIì—”ë“œí¬ì¸íŠ¸[]): Record<string, APIì—”ë“œí¬ì¸íŠ¸[]> => {
  return APIëª©ë¡.reduce((ê·¸ë£¹, api) => {
    const ì¹´í…Œê³ ë¦¬ = api.ì¹´í…Œê³ ë¦¬;
    if (!ê·¸ë£¹[ì¹´í…Œê³ ë¦¬]) {
      ê·¸ë£¹[ì¹´í…Œê³ ë¦¬] = [];
    }
    ê·¸ë£¹[ì¹´í…Œê³ ë¦¬].push(api);
    return ê·¸ë£¹;
  }, {} as Record<string, APIì—”ë“œí¬ì¸íŠ¸[]>);
};

// API ê²€ìƒ‰ í•¨ìˆ˜
export const APIê²€ìƒ‰ = (APIëª©ë¡: APIì—”ë“œí¬ì¸íŠ¸[], ê²€ìƒ‰ì–´: string): APIì—”ë“œí¬ì¸íŠ¸[] => {
  const ì†Œë¬¸ìê²€ìƒ‰ì–´ = ê²€ìƒ‰ì–´.toLowerCase();
  return APIëª©ë¡.filter(api => 
    api.ì´ë¦„.toLowerCase().includes(ì†Œë¬¸ìê²€ìƒ‰ì–´) ||
    api.ì„¤ëª….toLowerCase().includes(ì†Œë¬¸ìê²€ìƒ‰ì–´) ||
    api.ì¹´í…Œê³ ë¦¬.toLowerCase().includes(ì†Œë¬¸ìê²€ìƒ‰ì–´)
  );
};
